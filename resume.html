<html>
<head>
</head>
<body onload="myFunction()">
<script>
function myFunction() {
var data = {
  "basics": {
    "name": "Kenton McLeod",
    "picture": "available at /resume/image endpoint",
    "email": "kmcloudtech@gmail.com",
    "phone": "1-204-979-5370",
    "website": "http://kmcloud.tech",
    "github": "https://github.com/kenseventy",
    "summary": "Cloud Professional looking for next step.",
    "highlights": "Azure Solutions Architect Expert Certification",
    "location": {
      "city": "Winnipeg",
      "postalCode": "R3P 2A3",
      "countryCode": "CAN"
    },
    "certifications": [
      {"Azure" : ["Fundamentals AZ-900",
        "Administrator Associate AZ-103",
        "Azure Solutions Architect Expert AZ-305"
      ],
      "Cisco": "Cisco Certified Network Associate"
      }
    ],
    "skills": [
      {
        "name": "Azure",
        "level": "Expert",
        "keywords": [
          "Cloud Architecture",
          "Functions",
          "Storage",
          "CDN",
          "Cosmos DB",
          "Azure AD",
          "Visual Studio Code",
          "Azure Virtual Desktops",
          "Azure CLI",
          "Github Actions",
          "Node.js",
          "Express.js"
        ]
      }
    ],
  "work": [
  {
      "company": "Clear Concepts",
      "position": "Senior Cloud Consultant",
      "startDate": "January 2023",
      "summary": "Consultation of Azure and Microsoft 365 services and offerings",
      "technologies": [
        "Azure Infrastructure",
        "Azure Virtual Desktop",
        "Microsoft Intune",
        "Microsoft Graph API"
  ]
    }
  ],
  "additionalWork": [
    {
      "company": "Linden Christian School",
      "position": "IT Manager",
      "startDate": "August 2020",
      "endDate": "January 2023",
      "summary": "Manager of all things techology in the organization",
      "highlights": [
        "Improvement of internet speeds 10x",
        "Growth of Help Desk Team from 2 to 3"
      ]
    },
    {
      "company": "KM Cloud Technologies",
      "position": "Principal consultant",
      "website": "http://kmcloud.tech",
      "startDate": "Jan 2020",
      "endDate": "March 2020",
      "summary": "Primary contract with Winnipeg Airport Authorities",
      "highlights": [
        "Deployed Windows 10 to majority of computers in the organization",
        "Assisted with mentorship of Service Desk Team"
      ]
    }
  ],
  "education": [
    {
      "institution": "Trillium College",
      "area": "Network Administration",
      "studyType": "Associates Degree",
      "startDate": "January 2013",
      "endDate": "November 2013"
    }
  ]
}
}
window.addEventListener('DOMContentLoaded', (event) =>{
    GetVisitCount();
})

const functionApi = 'https://kmapicounter1.azurewebsites.net/api/HttpTrigger1?code=OsDNDu7vD1t-3o8M7SaPOntKUwjp0U5BNFckA10toAzFAzFu8Y_Kcw==';

const GetVisitCount = () => {
    let count = 30;
    fetch(functionApi).then(response => {
        return response.json()
    }).then(response =>{
        console.log("Website called function API.")
        count = response.count;
        document.getElementById('counter').innerText = count;
    }).catch(function(error){
        console.log(error)
    });
    return count;
    
}

document.getElementById("json").innerHTML = JSON.stringify(data, undefined, 2);
}

</script>
<pre id="json"></pre>
</body>
<html>